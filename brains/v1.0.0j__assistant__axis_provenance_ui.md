# v1.0.0j — Axis provenance surfaced in the UI

## Context
- Goal: expose the axis-family classification captured during ingest directly inside the Overlay tab so
  humans can confirm whether uploads were treated as wavelength, wavenumber, frequency, or energy.
- Prior state: provenance stored the classification, detection method, and headerless flag, but the UI
  offered no immediate visibility, forcing exports or log inspection during debugging.

## Changes
- Added an `AxisSummary` helper that inspects ingestion provenance (ASCII and FITS) and renders a caption
  under each trace in the manager with axis family, unit, detection method, and headerless context.
- Extended test coverage to validate the helper across alias-driven ASCII uploads, headerless numeric
  fallbacks, and FITS spectra so regressions highlight missing provenance data.
- Bumped release metadata to `1.0.0j` / `1.0.0.dev10` and refreshed docs, patch notes, and the handoff to
  describe the new UI provenance behaviour.

## Decisions
- Reused existing provenance events instead of minting new metadata fields, ensuring exports and previous
  traces benefit from the UI without migration work.
- Chose a per-trace caption beneath the visibility checkbox to keep the information close to the controls
  analysts already use while avoiding new layout chrome.
- Included detection method and headerless hints in the caption to make mis-detections obvious for messy
  uploads without diving into raw parameters.

## Tests & Evidence
- `python -m pip install -e .`
- `ruff check .`
- `black --check .`
- `mypy .`
- `PYTHONPATH=. pytest -q`
- `python tools/verifiers/Verify-Atlas.py`
- `python tools/verifiers/Verify-PatchNotes.py`
- `python tools/verifiers/Verify-Handoff.py`
- `python tools/verifiers/Verify-Brains.py`
- `PYTHONPATH=. python tools/verifiers/Verify-UI-Contract.py`

## Regressions Prevented
- Quick visibility into whether an upload was interpreted as energy/frequency prevents silent axis
  misclassifications from propagating into overlays or differential analyses.
- Headerless uploads now advertise when numeric heuristics fired, helping analysts judge whether manual
  relabelling is warranted.
- FITS traces clearly state their wavelength units and HDU origin, reducing confusion when multiple
  extensions are present.

## Follow-ups
- Expand the provenance display to cover downstream transforms (air↔vacuum, resolution matching, etc.).
- Build richer archive fetchers so the axis summary can be exercised against real MAST/SDSS products.
- Explore a consolidated provenance sidebar for longer-lived sessions or export bundles.

## Checklist
- [x] Atlas updated (`atlas/ui_contract.md`)
- [x] Patch notes & handoff updated (`PATCH_NOTES_v1.0.0(j).md`, `HANDOFF_v1.0.0(j).md`)
- [x] Tests added/updated (`tests/test_overlay_axis_summary.py`)
